<!DOCTYPE html>
<html>
<head>
	<title>Rent a Car servis</title>
	<script src="js/jquery.min.js"></script>
	<script>
		//---------------------------------RENT-A-CAR-------------------------------------//
        var rentACarORG = {};
		function showRentACar(){
            var rentACarId = 0;
            rentACarORG.rentACarId = rentACarId;
            $.ajax({
				url: 'app/rentacar/showRentACar/'+rentACarId,
				method: 'GET',
				contentType: 'application/json; charset=utf-8',
				success: function(rent) {
                    rentACarORG.rentACarName = rent.rentACarName;
				    rentACarORG.rentACarAddress = rent.rentACarAddress;
                    rentACarORG.rentACarDescription = rent.rentACarDescription;
                    rentACarORG.rentACarAverageGrade = rent.rentACarAverageGrade;
                    rentACarORG.rentACarEarning = rent.rentACarEarning;
                    $("#rentName").val(rent.rentACarName);
                    $("#rentAddress").val(rent.rentACarAddress);
                    $("#rentDesc").val(rent.rentACarDescription);
                    $("#rentGrade").val(rent.rentACarAverageGrade);
                    $("#rentEarning").val(rent.rentACarEarning);
				},
				error: function(error) {
					console.log(error);
					$(document.documentElement).html("<p>"+error+"</p>");
					return;
				}
			})
        }
        $(document).ready(function(){

            showRentACar();
        });
		$(document).ready(function(){
			$("#updateRentButton").click(function(event){
				event.preventDefault();
                var rent={};
                rent.rentACarID = rentACarORG.rentACarId;
				rent.rentACarName = $("#rentName").val();
				rent.rentACarAddress = $("#rentAddress").val();
				rent.rentACarDescription = $("#rentDesc").val();
                rent.rentACarEarning = rentACarORG.rentACarAverageGrade;
                rent.rentACarEarning = rentACarORG.rentACarEarning;
                
				var rentObj = JSON.stringify(rent);
				$.ajax({
					method:"PUT",
					url:'app/rentacar/updateRentACar',	
					data: rentObj,
					contentType:"application/json; charset=utf-8",
					success:function(){
						showRentACar();
					},
					error: function(error)
					{
						$(document.documentElement).html("<p>"+error+"</p>");
					}
				})
			})
		})

        $(document).ready(function(){
            showCars();
        });
		function showCars(){
			$.ajax({
				url: 'app/vehicles/getAll',
				method: 'GET',
				contentType: 'application/json; charset=utf-8',
				success: function(data) {
                    $.each(data,function(index,cars){ 
                        var tr = $("<tr></tr>");
                        tr.append(
                            "<td>" + cars.vehicleName + "</td>" +	
                            "<td>" + cars.vehicleGrade + "</td>"
                        );
                        $("#vehicleTable").append(tr);
                    });	
				},
				error: function(error) {
					console.log(error);
                    alert("Can't finish finding");
					return;
				}
			})	
        }
        $(document).ready(function(){
			$("#addVehicleButton").click(function(event){
				event.preventDefault();
                var vehicle={};
				vehicle.vehicleName = $("#vehicleName").val();
				vehicle.vehicleGrade = $("#vehicleGrade").val();
				$.ajax({
					method:"POST",
					url:'app/vehicles/add',	
					data: JSON.stringify(vehicle),
					contentType:"application/json; charset=utf-8",
					success:function(){
						showCars();
					},
					error: function(error)
					{
						alert("vehicle hasn't been added")
					}
				})
			})
		})
        
		
	</script>
</head>

<body>	
    <form>
        Rent-a-Car name: <input type="text" id="rentName"><br><br>
        Rent-a-Car address: <input type="text" id="rentAddress"><br><br>
        Rent-a-Car description: <input type="text" id="rentDesc"><br><br>
        Rent-a-Car grade: <input type="number" id="rentGrade" disabled><br><br>
        Rent-a-Car earning: <input type="number" id="rentEarning" disabled><br><br>
        <input type="submit" id="updateRentButton" value="Update rent-a-car"><br><br>
    </form>
    Rent-A-Car vehicles :
    <table border="1px solid black" style="width:100%" id="vehicleTable">
        <tr>
            <th>Vehicle name</th>
            <th>Vehicle grade</th>      
        </tr>
    </table>
    <br>
    <form>
        Vehicle name: <input type="text" id="vehicleName"><br><br>
        Vehicle grade: <input type="text" id="vehicleGrade"><br><br>
        <input type="button" id="addVehicleButton" value="Add vehicle">
    </form>
    
	<br><br>
	
	Rent-A-Car offers:
    <table border="1px solid black" style="width:100%" id="rentOffersTable">
        <tr>
            <th>Offer name</th>
            <th>Offer description</th>     
            <th>Offer price</th>   
        </tr>
    </table>
    <br>
    <input type="button" id="addRentOfferButton" value="Add offer">
    
    <br><br>
	Rent-A-Car branches:
    <table border="1px solid black" style="width:100%" id="rentBranchesTable">
        <tr>
            <th>Branch name</th>
            <th>Branch address</th>     
        </tr>
    </table>
    <br>
    <input type="button" id="addRentOfferButton" value="Add offer">		
	
</body>
</html>